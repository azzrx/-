# 学生管理系统

这是一个基于 Flask (后端) 和 Vue.js (前端) 的学生管理系统，支持学生信息、课程、选课、考勤、奖励处分、家长联系和用户管理等功能。

## 主要特性

- ✅ 完整的 CRUD 操作（创建、读取、更新、删除）
- ✅ 实时搜索功能 - 所有模块支持多字段搜索
- ✅ 详细信息展开 - 点击加号查看相关详细信息
- ✅ 响应式设计 - 现代化的用户界面
- ✅ 数据验证 - 前后端双重验证
- ✅ 错误处理 - 完善的错误提示机制

## 安装依赖

### 后端 (Flask)
1. 导航到项目根目录: `cd D:\system_of_students`
2. 安装 Python 依赖: `pip install -r requirements.txt`

### 前端 (Vue.js)
1. 导航到前端目录: `cd system_student`
2. 安装 Node.js 依赖: `npm install`

## 运行项目

### 后端
1. `cd D:\system_of_students`
2. `python app.py`
   - 服务器运行在 http://localhost:5000
   - 数据库 (student_management.db) 会自动初始化

### 前端
1. `cd system_student`
2. `npm run dev`
   - 应用运行在 http://localhost:5173
   - 通过代理调用后端 API

## 功能列表

### 学生管理
- ✅ 添加/编辑/删除学生信息
- ✅ 搜索功能：支持按学号、姓名、电话、班级、班主任搜索
- ✅ 详细信息展开：点击加号查看该学生的选课、成绩和考勤信息

### 课程管理
- ✅ 添加/编辑/删除课程
- ✅ 搜索功能：支持按课程代码、名称、教师、学分搜索
- ✅ 详细信息展开：点击加号查看选择该课程的所有学生及成绩

### 选课管理
- ✅ 为学生分配课程，记录成绩（考试成绩、平时成绩、总成绩）
- ✅ 搜索功能：支持按学生姓名、学号、课程名称、学期、成绩搜索
- ✅ 详细信息展开：点击加号查看该选课记录的考勤信息

### 考勤管理
- ✅ 记录出勤/缺席/请假
- ✅ 搜索功能：支持按学生姓名、学号、课程、日期、状态、原因搜索
- ✅ 分页显示：支持大量数据的分页浏览

### 奖励处分
- ✅ 记录奖励/处分
- ✅ 搜索功能：支持按学生姓名、学号、类型、标题、描述、日期搜索

### 家长联系
- ✅ 管理家长信息，模拟发送通知
- ✅ 搜索功能：支持按学生姓名、学号、家长姓名、关系、电话、邮箱、地址搜索

### 用户管理
- ✅ 添加/编辑用户，查看系统统计
- ✅ 搜索功能：支持按用户名、角色、创建时间搜索
- ✅ 系统统计：显示学生总数、课程总数、平均成绩、出勤率

### 登录系统
- ✅ 支持 admin, teacher, student 角色
- ✅ 不同角色显示不同的功能模块
- ✅ MD5 密码加密存储

## 技术栈

### 后端
- **框架**: Flask (Python Web框架)
- **数据库**: SQLite3
- **API**: RESTful API设计
- **安全**: MD5密码加密，CORS跨域支持
- **特性**: 
  - 数据库连接池和重试机制
  - 完整的错误处理和输入验证
  - 支持数据分页查询

### 前端
- **框架**: Vue.js 3 (Composition API)
- **构建工具**: Vite
- **HTTP客户端**: Axios
- **特性**:
  - 响应式数据绑定
  - 组件化设计
  - 实时搜索过滤
  - 自定义 Tooltip 提示
  - 模态框交互
  - 本地存储登录状态

## 核心功能实现

### 搜索功能
所有模块都实现了实时搜索功能：
- 使用 Vue `computed` 属性实现响应式过滤
- 支持多字段模糊搜索（大小写不敏感）
- 显示搜索结果计数
- 区分"无数据"和"无匹配结果"的提示

### 详细信息展开
三个核心模块支持展开查看详细信息：

1. **学生管理**：展开显示
   - 该学生所选课程及成绩
   - 该学生考勤信息

2. **课程管理**：展开显示
   - 选择该课程的所有学生
   - 每个学生的成绩信息

3. **选课管理**：展开显示
   - 该选课记录的考勤详情

### 数据流
- 每个组件独立获取数据
- 使用 Vue `ref` 和 `computed` 管理状态
- 模态框处理 CRUD 操作
- 展开时按需加载相关数据

## 快速开始

### 1. 安装依赖

**后端依赖**:
```bash
cd D:\system_of_students
pip install -r requirements.txt
```

**前端依赖**:
```bash
cd system_student
npm install
```

### 2. 启动应用

**启动后端服务器**:
```bash
cd D:\system_of_students
python app.py
```
后端服务运行在 http://localhost:5000，数据库会自动初始化。

**启动前端开发服务器**:
```bash
cd system_student
npm run dev
```
前端应用运行在 http://localhost:5173

### 3. 登录系统

默认账号：
- **管理员**: admin / admin123
- **教师**: teacher / teacher123
- **学生**: student / student123

登录后根据角色显示相应的功能模块。

## 使用指南

### 搜索功能
1. 在任意模块的搜索框中输入关键词
2. 系统会实时过滤显示匹配的记录
3. 搜索框右侧显示找到的记录数量
4. 清除搜索内容即可恢复完整列表

### 展开详细信息
1. 在学生管理、课程管理或选课管理模块中
2. 点击表格第一列的加号按钮（+）
3. 展开后显示相关详细信息
4. 再次点击减号按钮（-）收起

### 添加/编辑记录
1. 点击"添加"按钮打开表单
2. 填写必填字段（标有 * 的字段）
3. 点击"保存"提交数据
4. 点击表格中的"编辑"按钮可修改现有记录

### 删除记录
1. 点击表格中的"删除"按钮
2. 确认删除操作
3. 记录将被永久删除

## 数据库结构

系统使用 SQLite 数据库，包含以下表：
- `users` - 用户信息
- `students` - 学生信息
- `courses` - 课程信息
- `student_courses` - 选课记录和成绩
- `attendance` - 考勤记录
- `rewards_punishments` - 奖励处分记录
- `parents` - 家长信息

## API 接口

主要 API 端点：
- `GET/POST /api/students` - 学生管理
- `GET/POST /api/courses` - 课程管理
- `GET/POST /api/student-courses` - 选课管理
- `GET/POST /api/attendance` - 考勤管理
- `GET/POST /api/rewards-punishments` - 奖励处分
- `GET/POST /api/parents` - 家长管理
- `GET/POST /api/users` - 用户管理
- `POST /api/login` - 用户登录

所有 API 支持：
- `GET` - 查询数据（支持分页和筛选参数）
- `POST` - 创建新记录
- `PUT` - 更新记录
- `DELETE` - 删除记录

## 故障排除

### 常见问题

1. **数据库锁定错误**
   - 解决方案：关闭其他可能使用数据库的程序，或重启后端服务器

2. **API 请求失败**
   - 检查后端服务器是否运行
   - 检查浏览器控制台的错误信息
   - 确认 CORS 设置正确

3. **前端页面无法加载**
   - 检查 Node.js 是否安装
   - 运行 `npm install` 重新安装依赖
   - 清除浏览器缓存

4. **搜索功能不工作**
   - 检查浏览器控制台是否有 JavaScript 错误
   - 确认 Vue 组件正确加载

### 重置数据库

如果需要重置数据库：
```bash
# 删除数据库文件
rm student_management.db

# 重启后端服务器，数据库会自动重新创建
python app.py
```

## 开发说明

### 添加新功能模块
1. 在 `src/components/` 创建新的 Vue 组件
2. 在 `App.vue` 中注册新组件和路由
3. 在 `app.py` 中添加对应的 API 端点
4. 更新数据库表结构（如需要）

### 代码风格
- 后端：遵循 PEP 8 Python 编码规范
- 前端：使用 Vue 3 Composition API
- 使用有意义的变量和函数名
- 添加必要的注释和文档

## 更新日志

### 最新版本特性
- ✅ 为所有模块添加实时搜索功能
- ✅ 学生管理模块支持展开查看课程和考勤信息
- ✅ 课程管理模块支持展开查看选择该课程的学生
- ✅ 选课管理模块支持展开查看考勤详情
- ✅ 改进的 Tooltip 提示（快速响应）
- ✅ 优化的用户界面和交互体验
- ✅ 完善的错误处理和输入验证

## 许可证

本项目仅供学习和开发使用。

---

如有问题或建议，请检查控制台日志或联系开发团队。
